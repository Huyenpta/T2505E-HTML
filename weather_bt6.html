<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Weather</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap"
		rel="stylesheet">
	<link rel="stylesheet" href="css/layout.css" />
	<link rel="stylesheet" href="css/weather_bt6.css">
</head>

<body onload="searchWeather()">
	<main class="weather-section">
		<div class="weather-container">
			<div class="weather-content">
				<img src="https://openweathermap.org/img/wn/02d@2x.png" id="icon" class="t" />
				<h2 class="t"><span id="temp">33</span><sup><sup>o</sup>C | <sup>o</sup>F<sup></h2>
				<div class="weather-details">
					<p>Precipitation: <span id="prec">0</span>%</p>
					<p>Humidity: <span id="humd">65</span>%</p>
					<p>Wind: <span id="wind">13</span> km/h</p>
				</div>
			</div>
		</div>
	</main>
	<script type="text/javascript">
		function searchWeather() {
			const url = `https://api.openweathermap.org/data/2.5/forecast?q=hanoi&appid=09a71427c59d38d6a34f89b47d75975c&units=metric&lang=vi`;
			fetch(url)
				.then(res => res.json())
				.then(data => {
					const first = data.list[0]; // Lấy dự báo gần nhất
					// Nhiệt độ
					document.getElementById("temp").innerText = first.main.temp;
					// Độ ẩm
					document.getElementById("humd").innerText = first.main.humidity;
					// Tốc độ gió
					document.getElementById("wind").innerText = first.wind.speed;

					// Xác suất mưa (%)
					const pop = first.pop ? Math.round(first.pop * 100) : 0;
					document.getElementById("prec").innerText = pop;

					// Icon
					const icon = first.weather[0].icon;
					document.getElementById("icon").src = `https://openweathermap.org/img/wn/${icon}@2x.png`;
				})
				.catch(err => console.error(err));
		}
	</script>
</body>

</html>